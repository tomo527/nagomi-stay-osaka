---
import Layout from '../layouts/Layout.astro';
import { getPhotosInDir, getExactOrNormalizedPhoto } from '../lib/photos';
import ImageWrapper from '../components/ImageWrapper.astro';

const amenityPhotos = getPhotosInDir('07_Amenities');

// Helper to define an amenity item
interface AmenityItem {
  nameEn: string;
  nameJa: string;
}

const renderAmenity = (item: AmenityItem) => {
  const photoPath = getExactOrNormalizedPhoto(item.nameEn, amenityPhotos);
  
  return `
    <li class="amenity-item">
      <div class="amenity-text">
        <strong>${item.nameEn}</strong>
        <div class="text-ja text-muted">${item.nameJa}</div>
      </div>
      ${photoPath ? `
      <div class="amenity-photo-container">
        <img src="${photoPath}" alt="${item.nameEn}" class="amenity-inline-photo" loading="lazy" />
      </div>
      ` : ''}
    </li>
  `;
};

// Data definition
const amenitiesEnt: AmenityItem[] = [
  { nameEn: "Free High-Speed Wi-Fi", nameJa: "無料の高速Wi-Fi" },
  { nameEn: "Home Theater Projector", nameJa: "ホームシアター用プロジェクター" },
  { nameEn: "Screen", nameJa: "スクリーン" }
];

const amenitiesKitchen: AmenityItem[] = [
  { nameEn: "Full Kitchen", nameJa: "充実した設備のフルキッチン" },
  { nameEn: "Refrigerator, Microwave, Stove", nameJa: "冷蔵庫、電子レンジ、コンロ" },
  { nameEn: "Cooking Basics & Tableware", nameJa: "基本的な調理器具と食器類" }
];

const amenitiesComfort: AmenityItem[] = [
  { nameEn: "Air Conditioning (AC Heating)", nameJa: "エアコン（冷暖房）" },
  { nameEn: "Washer-Dryer (Combo)", nameJa: "洗濯乾燥機" },
  { nameEn: "Self Check-In Dial Lock", nameJa: "ダイヤル錠によるセルフチェックイン" }
];

const amenitiesBath: AmenityItem[] = [
  { nameEn: "Shampoo, Conditioner, Body Soap", nameJa: "シャンプー、コンディショナー、ボディソープ" },
  { nameEn: "Clean Towels & Linens", nameJa: "清潔なタオルとリネン類" },
  { nameEn: "Hair Dryer & Hair straightener", nameJa: "ヘアドライヤー＆ヘアアイロン" }
];
---

<Layout 
  title="Amenities" 
  description="Full list of amenities and facilities available at Nagomi Stay Osaka, including Wi-Fi, projector, full kitchen, and washer-dryer."
>
  <div class="container page-content">
    <h1>Amenities & Facilities</h1>
    <p class="text-ja mb-xl">設備・アメニティ</p>
    
    <p class="mb-lg">We provide everything you need for a comfortable stay, whether it's for a few days or a longer vacation.</p>
    <p class="text-ja mb-xl">数日のご滞在でも、長期のご旅行でも快適にお過ごしいただけるよう、充実した設備をご用意しております。</p>
    
    <div class="amenities-grid">
      <div class="amenity-category">
        <div class="category-header">
          <h3>Entertainment & Connectivity</h3>
          <p class="text-ja mb-md">エンターテイメント・通信</p>
        </div>
        <ul set:html={amenitiesEnt.map(renderAmenity).join('')} />
      </div>
      
      <div class="amenity-category">
        <div class="category-header">
          <h3>Kitchen & Dining</h3>
          <p class="text-ja mb-md">キッチン・ダイニング</p>
        </div>
        <ul set:html={amenitiesKitchen.map(renderAmenity).join('')} />
      </div>

      <div class="amenity-category">
        <div class="category-header">
          <h3>Comfort & Laundry</h3>
          <p class="text-ja mb-md">快適設備・洗濯関連</p>
        </div>
        <ul set:html={amenitiesComfort.map(renderAmenity).join('')} />
      </div>

      <div class="amenity-category">
        <div class="category-header">
          <h3>Bathroom & Essentials</h3>
          <p class="text-ja mb-md">バスルーム・生活必需品</p>
        </div>
        <ul set:html={amenitiesBath.map(renderAmenity).join('')} />
      </div>
    </div>
  </div>
</Layout>

<style>
  .page-content {
    padding: var(--spacing-xl) var(--spacing-sm);
  }
  .mb-xl {
    margin-bottom: var(--spacing-xl);
  }
  .amenities-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-xl);
  }
  .amenity-category :global(ul) {
    list-style: none;
    padding: 0;
  }
  .amenity-category :global(.amenity-item) {
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  .amenity-category :global(.amenity-item:last-child) {
    border-bottom: none;
  }
  .amenity-category :global(.amenity-photo-container) {
    width: 100%;
    border-radius: 8px;
    overflow: hidden;
    background: #f8f9fa;
    border: 1px solid var(--color-border);
  }
  .amenity-category :global(.amenity-inline-photo) {
    width: 100%;
    height: auto;
    aspect-ratio: 16/9;
    object-fit: cover;
    display: block;
  }
</style>
