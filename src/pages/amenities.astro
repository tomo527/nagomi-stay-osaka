---
import Layout from '../layouts/Layout.astro';
import { getPhotosInDir } from '../lib/photos';
import ImageWrapper from '../components/ImageWrapper.astro';

const amenityPhotos = getPhotosInDir('07_Amenities');

const getAmenityPhoto = (keywords: string[]) => {
  if (!amenityPhotos || amenityPhotos.length === 0) return null;
  
  for (const keyword of keywords) {
    const matched = amenityPhotos.find(p => p.toLowerCase().includes(keyword.toLowerCase()));
    if (matched) return matched;
  }
  
  // Fallback to the first image if no keywords match
  return amenityPhotos[0];
};

const entPhoto = getAmenityPhoto(['screen', 'projector', 'tv', 'entertainment']);
const kitchenPhoto = getAmenityPhoto(['kitchen', 'microwave', 'stove', 'dining']);
const comfortPhoto = getAmenityPhoto(['washer', 'dryer', 'ac', 'comfort']);
const bathPhoto = getAmenityPhoto(['hair', 'straightener', 'shampoo', 'bath']);
---

<Layout 
  title="Amenities" 
  description="Full list of amenities and facilities available at Nagomi Stay Osaka, including Wi-Fi, projector, full kitchen, and washer-dryer."
>
  <div class="container page-content">
    <h1>Amenities & Facilities</h1>
    <p class="text-ja mb-xl">設備・アメニティ</p>
    
    <p class="mb-lg">We provide everything you need for a comfortable stay, whether it's for a few days or a longer vacation.</p>
    <p class="text-ja mb-xl">数日のご滞在でも、長期のご旅行でも快適にお過ごしいただけるよう、充実した設備をご用意しております。</p>
    
    <div class="amenities-grid">
      <div class="amenity-category">
        <div class="category-header">
          <h3>Entertainment & Connectivity</h3>
          <p class="text-ja mb-md">エンターテイメント・通信</p>
        </div>
        {entPhoto && <div class="category-img-container"><ImageWrapper src={entPhoto} alt="Entertainment Amenities" className="category-img" /></div>}
        <ul>
          <li><strong>Free High-Speed Wi-Fi</strong><div class="text-ja text-muted">無料の高速Wi-Fi</div></li>
          <li><strong>Home Theater Projector</strong><div class="text-ja text-muted">ホームシアター用プロジェクター</div></li>
          <li><strong>Screen</strong><div class="text-ja text-muted">スクリーン</div></li>
        </ul>
      </div>
      
      <div class="amenity-category">
        <div class="category-header">
          <h3>Kitchen & Dining</h3>
          <p class="text-ja mb-md">キッチン・ダイニング</p>
        </div>
        {kitchenPhoto && <div class="category-img-container"><ImageWrapper src={kitchenPhoto} alt="Kitchen Amenities" className="category-img" /></div>}
        <ul>
          <li><strong>Full Kitchen</strong><div class="text-ja text-muted">充実した設備のフルキッチン</div></li>
          <li><strong>Refrigerator, Microwave, Stove</strong><div class="text-ja text-muted">冷蔵庫、電子レンジ、コンロ</div></li>
          <li><strong>Cooking Basics & Tableware</strong><div class="text-ja text-muted">基本的な調理器具と食器類</div></li>
        </ul>
      </div>

      <div class="amenity-category">
        <div class="category-header">
          <h3>Comfort & Laundry</h3>
          <p class="text-ja mb-md">快適設備・洗濯関連</p>
        </div>
        {comfortPhoto && <div class="category-img-container"><ImageWrapper src={comfortPhoto} alt="Comfort Amenities" className="category-img" /></div>}
        <ul>
          <li><strong>Air Conditioning (AC/Heating)</strong><div class="text-ja text-muted">エアコン（冷暖房）</div></li>
          <li><strong>Washer-Dryer (Combo)</strong><div class="text-ja text-muted">洗濯乾燥機</div></li>
          <li><strong>Self Check-In Dial Lock</strong><div class="text-ja text-muted">ダイヤル錠によるセルフチェックイン</div></li>
        </ul>
      </div>

      <div class="amenity-category">
        <div class="category-header">
          <h3>Bathroom & Essentials</h3>
          <p class="text-ja mb-md">バスルーム・生活必需品</p>
        </div>
        {bathPhoto && <div class="category-img-container"><ImageWrapper src={bathPhoto} alt="Bathroom Amenities" className="category-img" /></div>}
        <ul>
          <li><strong>Shampoo, Conditioner, Body Soap</strong><div class="text-ja text-muted">シャンプー、コンディショナー、ボディソープ</div></li>
          <li><strong>Clean Towels & Linens</strong><div class="text-ja text-muted">清潔なタオルとリネン類</div></li>
          <li><strong>Hair Dryer & Hair straightener</strong><div class="text-ja text-muted">ヘアドライヤー＆ヘアアイロン</div></li>
        </ul>
      </div>
    </div>
  </div>
</Layout>

<style>
  .page-content {
    padding: var(--spacing-xl) var(--spacing-sm);
  }
  .mb-xl {
    margin-bottom: var(--spacing-xl);
  }
  .amenities-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-xl);
  }
  .amenity-category ul {
    list-style: none;
    padding: 0;
  }
  .amenity-category li {
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
  }
  .amenity-category li:last-child {
    border-bottom: none;
  }
  .category-img-container {
    margin-bottom: var(--spacing-md);
    border-radius: 8px;
    overflow: hidden;
    height: 180px;
    background: #f0f0f0;
  }
  .category-img-container :global(img), .category-img-container :global(.image-placeholder) {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }
</style>
